{% load static %}
<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1, width=device-width">

	<link rel="stylesheet" href="{% static 'universitaryWellbeing/css/login.css' %}">

</head>

<body>

	<div class="login-1">
		<img class="logo-icesi-blanco" src="{% static 'universitaryWellbeing/img/logo-icesi-blanco.png' %}"
			alt="Logo Icesi">
		<div class="hola-de-nuevo">¡Hola de nuevo!</div>
		<form method="POST" action="">
			{% csrf_token %}

			<div class="field" id="emailField">
				<div class="value">
					<input type="text" id="cedula" name="cedula" placeholder="Cédula" value="{{ cedula|default:'' }}">

				</div>
			</div>

			<div class="field {% if not show_password %}hidden{% endif %}" id="passwordField">
				<div class="value">
					<input type="password" id="password" name="password" placeholder="Contraseña">
					<button type="button" class="password-toggle" id="togglePassword" aria-label="Mostrar contraseña"
						title="Mostrar contraseña">
						<!-- eye (visible) -->
						<svg class="icon-eye" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18"
							height="18" aria-hidden="true">
							<path fill="currentColor"
								d="M12 5c-7 0-11 7-11 7s4 7 11 7 11-7 11-7-4-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z">
							</path>
							<circle cx="12" cy="12" r="2.5" fill="currentColor"></circle>
						</svg>
						<!-- eye-off (hidden) -->
						<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
							stroke="currentColor" class="icon-eye-off" width="24" height="24">
							<path stroke-linecap="round" stroke-linejoin="round" d="M3.98 8.223A10.477 10.477 0 0 0 1.5 12c2.25 
           4.5 6.75 7.5 10.5 7.5 1.863 0 3.611-.54 5.094-1.477M6.228 
           6.228A10.477 10.477 0 0 1 12 4.5c3.75 0 8.25 3 10.5 
           7.5a10.477 10.477 0 0 1-4.06 4.374M6.228 6.228 3 3m3.228 
           3.228L21 21" />
						</svg>
					</button>
				</div>
			</div>

			<!-- Mensajes de error -->
			{% if messages %}
			<div class="messages">
				{% for message in messages %}
				<div class="message">{{ message }}</div>
				{% endfor %}
			</div>
			{% endif %}

			<div class="botn-agregar" id="loginButton">
				<div class="botn-agregar-child"></div>
				<b class="b">Ingresar</b>
			</div>
		</form>
		<b class="registrarse" id="registrarseText">Registrarse</b>

		<div class="administrador" id="administradorText">Administrador</div>
		<div class="universidad-icesi-calle-container">
			<p class="universidad-icesi-calle">Universidad Icesi, Calle 18 No. 122-135</p>
			<p class="universidad-icesi-calle">Pance, Cali - Colombia</p>
			<p class="universidad-icesi-calle">Teléfono: +57 (602) 555 2334</p>
			<p class="universidad-icesi-calle">Celular: +57 300 910 8606</p>
			<p class="universidad-icesi-calle">
				<a class="login-1-ventanillaunicaicesieduco" href="mailto:ventanillaunica@icesi.edu.co" target="_blank">
					<span class="ventanillaunicaicesieduco2">ventanillaunica@icesi.edu.co</span>
				</a>
			</p>
		</div>
	</div>




	<script>
    const cedulaInput = document.getElementById("cedula");
    const passwordField = document.getElementById("passwordField");

    cedulaInput.addEventListener("input", function () {
        if (cedulaInput.value.trim() !== "") {
            passwordField.classList.remove("hidden");  // mostrar
        } else {
            passwordField.classList.add("hidden");     // ocultar
        }
    });

    var loginButton = document.getElementById("loginButton");
    if (loginButton) {
        loginButton.addEventListener("click", function () {
            this.closest("form").submit(); // envía el formulario padre
        });
    }

    var fieldContainer = document.getElementById("fieldContainer");
    if (fieldContainer) {
        fieldContainer.addEventListener("click", function (e) {
            // Add your code here JAVA SCRIPT NOpoasoaSOIosiaoiOS HELP DAMARALS
        });
    }

    var registrarseText = document.getElementById("registrarseText");
    if (registrarseText) {
        registrarseText.addEventListener("click", function (e) {
            window.location.href = "{% url 'register' %}";
        });
    }

    var administradorText = document.getElementById("administradorText");
    if (administradorText) {
        administradorText.addEventListener("click", function (e) {
            // Add your code here
        });
    }

    (function () {
        const toggle = document.getElementById('togglePassword');
        const pwd = document.getElementById('password');
        const eye = toggle.querySelector('.icon-eye');
        const eyeOff = toggle.querySelector('.icon-eye-off');

        if (!toggle || !pwd) return;

        // initial state: hidden
        toggle.setAttribute('data-visible', 'false');

        toggle.addEventListener('click', function () {
            const start = pwd.selectionStart;
            const end = pwd.selectionEnd;

            const isVisible = toggle.getAttribute('data-visible') === 'true';
            if (isVisible) {
                // ocultar contraseña
                pwd.type = 'password';
                toggle.setAttribute('data-visible', 'false');
                toggle.setAttribute('aria-label', 'Mostrar contraseña');
                toggle.title = 'Mostrar contraseña';

                // cambiar íconos
                eye.style.display = 'inline';
                eyeOff.style.display = 'none';
            } else {
                // mostrar contraseña
                pwd.type = 'text';
                toggle.setAttribute('data-visible', 'true');
                toggle.setAttribute('aria-label', 'Ocultar contraseña');
                toggle.title = 'Ocultar contraseña';

                // cambiar íconos
                eye.style.display = 'none';
                eyeOff.style.display = 'inline';
            }

            // restaurar caret
            try {
                pwd.setSelectionRange(start, end);
                pwd.focus({ preventScroll: true });
            } catch (err) {
                pwd.focus();
            }
        });
    })();
</script>

</body>

</html>